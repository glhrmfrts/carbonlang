import std::platform

extern(C) {
func HeapAlloc(
    hHeap:   int,
    dwFlags: int,
    dwBytes: usize
): rawptr

func HeapFree(
    hHeap:   int,
    dwFlags: int,
    lpMem:   rawptr
): bool

func GetProcessHeap(): int
}

extern(carbon, std::platform) {
func alloc(size: usize): memory {
    return memory{ HeapAlloc(GetProcessHeap(), 0, size), size }
}

func free(m: &memory) {
    HeapFree(GetProcessHeap(), 0, m.ptr)
    m.ptr = nullptr
}
}
